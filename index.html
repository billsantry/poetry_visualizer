<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poetry Visualizer - Animated Sentiment & Phonetics</title>
    <meta name="description"
        content="An animated poetry visualizer that creates dynamic backgrounds based on sentiment analysis and phonetic properties">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@300;400;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Full Screen Loading Overlay -->
    <div id="loadingIndicator" class="hidden">
        <div class="spinner"></div>
        <div id="loadingText">Analyzing poem...</div>
        <div id="progressBarContainer">
            <div id="progressBarFill"></div>
        </div>
    </div>
    <!-- Background Slideshow System -->
    <div id="slideshow-container">
        <!-- Slides will be injected here dynamically -->
    </div>

    <!-- Text Overlay -->
    <div id="textOverlay" class="hidden">
        <div id="poemText"></div>
    </div>

    <!-- Input Panel -->
    <div id="inputPanel" class="panel">
        <div class="panel-content">
            <h1>Poetry Visualizer</h1>
            <p class="subtitle">See your words come to life with AI imagery</p>

            <div class="input-group">
                <label for="aiProvider">AI Provider:</label>
                <select id="aiProvider"
                    style="width: 100%; padding: 0.8rem; margin-bottom: 1rem; border-radius: 4px; border: 1px solid #444; background: #222; color: #fff;">
                    <option value="openai">OpenAI DALL-E 3</option>
                    <option value="google">Google Vertex AI (Nano Banana)</option>
                </select>
            </div>

            <div id="openai-config" class="provider-config">
                <div class="input-group">
                    <label for="apiKey">OpenAI API Key:</label>
                    <input type="password" id="apiKey" placeholder="sk-..." autocomplete="off">
                    <p class="note">Key used directly from browser to OpenAI.</p>
                </div>
            </div>

            <div id="google-config" class="provider-config hidden">
                <div class="alert-info"
                    style="background: #222; padding: 1rem; border-radius: 4px; border: 1px solid #444;">
                    <p style="margin: 0; padding-bottom: 0.5rem; font-weight: bold;">✅ Managed Backend</p>
                    <p style="margin: 0; font-size: 0.9em; opacity: 0.8;">
                        Google Vertex AI credentials are securely stored on the server environment.
                    </p>
                </div>
                <p class="note" style="margin-top: 1rem;">Ensure GOOGLE_API_KEY and GOOGLE_PROJECT_ID are set in your
                    Azure Environment Variables.</p>
            </div>



            <div class="input-group">
                <label for="poemInput">Enter your poem:</label>
                <textarea id="poemInput" placeholder="Type or paste your poem here...
                    
Example:
The woods are lovely, dark and deep,
But I have promises to keep,
And miles to go before I sleep,
And miles to go before I sleep." rows="8"></textarea>
            </div>

            <div class="controls">
                <button id="visualizeBtn" class="btn-primary">
                    <span class="btn-icon">✨</span>
                    <span id="btnText">Visualize Poem</span>
                </button>
            </div>

            <div id="errorMessage" class="error-message hidden"></div>


            <footer class="footer text-center mt-5 text-muted small">
                <p>Created by <a href="mailto:billsantry@gmail.com" class="text-decoration-none"
                        style="color: var(--color-accent);">billsantry</a> using <a href="https://antigravity.google"
                        target="_blank" class="text-decoration-none" style="color: var(--color-accent);">Google
                        Antigravity</a>
                </p>
            </footer>
        </div>
    </div>

    <!-- Controls during visualization -->
    <div id="visualControls" class="hidden">
        <button id="stopBtn" class="control-btn" title="Stop & Edit">
            <span>⏹</span>
        </button>
    </div>

    <script src="config.js"></script>


    <script type="module" src="script.js?v=10"></script>
</body>

</html>